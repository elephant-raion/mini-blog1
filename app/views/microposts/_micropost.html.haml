%li{id: "micropost-#{micropost.id}"}
  %span.name
    = link_to micropost.user.name, user_path(micropost.user)
  - if user_signed_in?
    - if current_user.id != micropost.user.id && @following_users.exclude?(micropost.user)
      = form_with(model: current_user.followings.build, remote: true) do |f|
        %div= hidden_field_tag :following_user_id, micropost.user.id
        = f.submit "Follow", class: "btn btn-primary"
  %span.content
    = micropost.content
  - if user_signed_in?    
    %span.liking
      = form_with(model: micropost.likings.build, remote: true) do |f|
        %div= hidden_field_tag :micropost_id, micropost.id
        %div= hidden_field_tag :user_id, current_user.id
        = f.submit "Liking", class: "btn btn-primary"
  %span.timestamp
    Posted
    = l micropost.created_at